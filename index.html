<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Polyline Animation</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="glavni">
    <canvas id="canvas" width="484" height="484"></canvas>
    <img src="images/30 by 30 orthogonal maze (5).svg" id="slika">
  </div>
  <div id="controls">
    <input type="color" id="izbira" value="#ff0000">
    <button id="speedBtn">Speed: Normal</button>
    <button id="startBtn">Start Drawing</button>
    <button id="mazeSwitch">Switch Maze</button>
  </div>

  <script>
    var maze1 = {
      xValues: [234, 234, 250, 250, 218, 218, 202, 202, 186, 186, 218, 218, 234, 234, 218, 
        218, 234, 234, 250, 250, 266, 266, 282, 282, 266, 266, 250, 250, 234, 234, 
        202, 202, 170, 170, 202, 202, 186, 186, 202, 202, 186, 186, 170, 170, 234,
        234, 218, 218, 202, 202, 186, 186, 170, 170, 154, 154, 138, 138, 122, 122,
        138, 138, 154, 154, 186, 186, 202, 202, 250, 250],
      yValues: [2, 10, 10, 26, 26, 10, 10, 26, 26, 42, 42, 74, 74, 90, 90, 106,
        106, 122, 122, 106, 106, 122, 122, 202, 202, 186, 186, 170, 170, 250, 
        250, 234, 234, 266, 266, 282, 282, 298, 298, 314, 314, 330, 330, 346, 346,
        410, 410, 442, 442, 426, 426, 410, 410, 394, 394, 426, 426, 442, 442, 458,
        458, 474, 474, 442, 442, 458, 458, 474, 474, 482, 482]
    };
    var maze2 = {
  xValues: [234, 234, 202, 202, 218, 218, 234, 234, 250, 250, 218, 218, 202, 202, 170, 170, 
    154, 154, 138, 138, 122, 122, 138, 138, 122, 122, 90, 90, 58, 58, 74, 74, 42, 42, 26, 26, 
    10, 10, 26, 26, 10, 10, 26, 26, 74, 74, 90, 90, 42, 42, 74, 74, 58, 58, 26, 26, 10, 10, 
    26, 26, 42, 42, 58, 58, 74, 74, 90, 90, 106, 106, 90, 90, 58, 58, 42, 42, 74, 74, 90, 90, 
    122, 122, 138, 138, 154, 154, 138, 138, 170, 170, 202, 202, 234, 234, 250, 250, 298, 298, 
    314, 314, 298, 298, 314, 314, 298, 298, 314, 314, 346, 346, 394, 394, 362, 362, 314, 314, 
    330, 330, 346, 346, 330, 330, 298, 298, 282, 282, 298, 298, 250, 250],
  
yValues: [2, 10, 10, 26, 26, 42, 42, 58, 58, 74, 74, 58, 58, 74, 74, 90, 
    90, 154, 154, 138, 138, 122, 122, 74, 74, 58, 58, 90, 90, 74, 74, 58, 58, 42, 42, 58, 58, 
    154, 154, 186, 186, 250, 250, 218, 218, 202, 202, 234, 234, 250, 250, 282, 282, 330, 330, 
    346, 346, 394, 394, 410, 410, 394, 394, 426, 426, 442, 442, 394, 394, 346, 346, 362, 362, 
    378, 378, 346, 346, 330, 330, 314, 314, 362, 362, 314, 314, 298, 298, 282, 282, 314, 314, 
    330, 330, 314, 314, 282, 282, 234, 234, 298, 298, 314, 314, 346, 346, 378, 378, 362, 362, 
    394, 394, 474, 474, 458, 458, 426, 426, 442, 442, 410, 410, 394, 394, 410, 410, 442, 442, 
    474, 474, 482, 482]
};




    var currentMaze = maze1;
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    var currentIndex = 0;
    var speed = 100;
    var drawing = false;

    function drawLineSegment(x1, y1, x2, y2, color) {
      ctx.strokeStyle = color;
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.stroke();
    }

    function animateLine() {
      if (!drawing || currentIndex >= currentMaze.xValues.length - 1) return;
      var color = document.getElementById("izbira").value;
      drawLineSegment(currentMaze.xValues[currentIndex], currentMaze.yValues[currentIndex],
                      currentMaze.xValues[currentIndex + 1], currentMaze.yValues[currentIndex + 1], color);
      currentIndex++;
      setTimeout(animateLine, speed);
    }

    document.getElementById("startBtn").addEventListener("click", function() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      currentIndex = 0;
      drawing = true;
      animateLine();
    });

    document.getElementById("speedBtn").addEventListener("click", function() {
      if (speed === 100) {
        speed = 50;
        this.textContent = "Speed: Fast";
      } else if (speed === 50) {
        speed = 200;
        this.textContent = "Speed: Slow";
      } else {
        speed = 100;
        this.textContent = "Speed: Normal";
      }
    });

   document.getElementById("mazeSwitch").addEventListener("click", function() {
      currentMaze = (currentMaze === maze1) ? maze2 : maze1;
      document.getElementById("slika").src = (currentMaze === maze1) ? "images/30 by 30 orthogonal maze (5).svg" : "images/maze2.svg";
      ctx.clearRect(0, 0, canvas.width, canvas.height); 
    }); 
  </script>
</body>
</html>
